# Torkan 2018 - för utvecklare
Filerna på formatet `.npz` som används i uppgiften framställdes på följande sätt:

- Bilder laddades ner från [Coperinucus Open Access Hub](https://scihub.copernicus.eu/dhus/#/home) genom att markera sökt område och ställa in sökt datum. Bilderna kommer från Mission: Sentinel-2. Satellite platform lämnas blankt, detta avgör bara vilken kamera bilderna kommer ifrån. För product type användes S2MSI1C. Dessa bilderna är inte helt råa utan har redan formaterats för att lättare användas. För inställningen cloud cover valdes [0 TO 10], detta innebär att vi får upp bilder som är upp till 10% täckta av moln. Dock gör vi beskärningar av bilderna senare, och för det beskärda området är det viktigt att inga synliga moln finns eftersom det gör det svårt att få en verklig bild av NDVI. 
- När bilderna är nedladdade användes `gdal` för att öppna filerna genom att i `.SAFE`-directoriet köra `gdal.Open("MTD_MSIL1C.xml").GetSubDatasets()`. Detta listar alla datasets som finns i filen. Datasetet som används är det första som innehåller banden B4 och B8. Det är det röda bandet respektive det nära infraröda bandet. Ytterligare information om de olika banden kan hittas på [gdals hemsida](https://gdal.org/drivers/raster/sentinel2.html). Efter detta används `gdal.Open()` igen fast nu på det första datasetet. På denna filen används `.ReadAsArray()` vilket returnerar en (4, 10980, 10980)-numpyarray.
- Arrayen innehåller B4 och B8 på plats 2 respektive 3. När vi kollar på bokskogen vill vi beskära bilden för att få med just den delen. Detta görs genom att slica arrayen med `[3500:55000, 8000:10000]`.
- Efter detta används funktionen `reduce_array` i `extract_ndvi.py` som komprimerar filen genom att ta medelvärdet över 3*3-kvadrater och sparar värdena i en ny array. Dessa arrayer sparas sedan i filerna på formatet `.npz` med nycklarna `"red"` och `"nir"`.
